<!DOCTYPE html>
<html class="theme-gruvbox" data-theme="theme-gruvbox" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="dimgray" media="(prefers-color-scheme: dark)" />
    <meta name="description" content="task manager action tracker habit builder" />
    <title>Focus Tree</title>
    <link rel="icon" href="favicon.ico" sizes="any" />
    <link rel="stylesheet" href="style/main.css" />
    <!-- <script src="assets/tutorial.js"></script> -->
    <script src="script/const.js"></script>
    <script src="script/taskControl.js"></script>
    <script src="script/taskView.js"></script>
    <script src="script/taskBase.js"></script>
    <script src="script/taskNode.js"></script>
    <script src="script/taskFocus.js"></script>
    <script src="script/taskMenu.js"></script>
  </head>
  <body>
    <template id="template-task">
      <style>
        /* Flash of Unstyled Content fix */
        div {
          visibility: hidden;
          opacity: 0;
        }
      </style>
      <link rel="stylesheet" href="style/task.css" />
      <div>
        <details>
          <summary part="summary">
            <button name="task-menu" part="icon-button" title="Menu">‚ò∞</button>
            <slot name="task-name"></slot>
          </summary>
          <section>
            <slot name="task-tree"></slot>
          </section>
        </details>
      </div>
    </template>
    <template id="template-menu">
      <menuitem>
        <button class="icon-button" name="task-focus" title="Focus">üëÅ</button>
      </menuitem>
      <menuitem>
        <button class="icon-button" name="task-add" title="Add subtask">‚úö</button>
      </menuitem>
      <menuitem>
        <button class="icon-button" name="task-edit" title="Edit">‚úé</button>
      </menuitem>
      <menuitem>
        <slot name="task-state"></slot>
      </menuitem>
      <menuitem>
        <button class="icon-button" name="task-sync" title="Sync state">‚á£</button>
      </menuitem>
      <menuitem>
        <button class="icon-button" name="task-clone" title="Clone">‚öØ</button>
      </menuitem>
      <menuitem>
        <button class="icon-button" name="task-delete" title="Delete">‚úñ</button>
      </menuitem>
    </template>
    <template id="template-edit">
      <style>
        /* Flash of Unstyled Content fix */
        div {
          visibility: hidden;
          opacity: 0;
        }
      </style>
      <link rel="stylesheet" href="style/task.css" />
      <link rel="stylesheet" href="style/edit.css" />
      <div>
        <span>
          <button part="icon-button" name="task-edit" title="Edit">‚úé</button>
          <slot name="task-name"></slot>
          <button part="icon-button" name="task-delete" title="Delete">‚úñ</button>
        </span>
        <span>
          <button part="icon-button" name="task-edit" title="Edit">‚úé</button>
          <slot name="task-note">Add a note.</slot>
        </span>
        <menu>
          <menuitem>
            <button part="icon-button" name="task-focus" title="Focus">üëÅ</button>
          </menuitem>
          <menuitem>
            <slot name="task-state"></slot>
          </menuitem>
          <menuitem>
            <button part="icon-button" name="task-sync" title="Sync state">‚á£</button>
          </menuitem>
          <menuitem>
            <button part="icon-button" name="task-clone" title="clone">‚öØ</button>
          </menuitem>
          <menuitem>
            <button part="icon-button" name="task-save" title="Save">‚úî</button>
          </menuitem>
        </menu>
        <details>
          <summary part="summary">
            <slot name="tree-title" data-text="Subtasks">No subtasks</slot>
            <button name="task-add" part="icon-button" title="Add subtask">‚úö</button>
          </summary>
          <section>
            <slot name="task-tree"></slot>
          </section>
        </details>
      </div>
    </template>
    <template id="template-focus">
      <header>
        <slot name="focus-task-name"></slot>
        <slot name="focus-task-note"></slot>
      </header>
      <ul>
        <slot name="task-name"></slot>
      </ul>
      <menu>
        <menuitem>
          <button class="icon-button" name="task-done" title="Done">‚úì</button>
        </menuitem>
        <menuitem>
          <form method="dialog">
            <button class="icon-button" name="task-pause" title="Pause">‚ùô‚ùô</button>
          </form>
        </menuitem>
      </menu>
    </template>
    <header>
      <button class="icon-button" id="root-menu-toggle" name="root-menu" title="Menu">‚ò∞</button>
      <menu>
        <menuitem><button class="icon-button" id="root-add" title="New">‚úö</button></menuitem>
        <menuitem><button class="icon-button" id="root-import" title="Import">‚Üß</button></menuitem>
        <menuitem><button class="icon-button" id="root-export" title="Export">‚Ü•</button></menuitem>
        <menuitem>
          <button
            class="icon-button"
            id="root-settings"
            title="Settings"
            onclick="settings.showModal()"
          >
            ‚õ≠
          </button>
          <dialog id="settings" closedby="any">
            <p>Theme:</p>
            <select
              onchange="document.documentElement.setAttribute('class', `theme-${this.value.toLowerCase()}`); document.documentElement.setAttribute('data-theme', `theme-${this.value.toLowerCase()}`)"
            >
              <option>Forest</option>
              <option>Gruvbox</option>
            </select>
          </dialog>
        </menuitem>
        <menuitem><button class="icon-button" id="root-info" title="Info">?</button></menuitem>
      </menu>
    </header>
    <main></main>
    <script src="script/main.js"></script>
  </body>
</html>
